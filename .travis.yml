sudo: required
services:
- docker
script:
- docker build -t stocard/dockerbase-node:$TRAVIS_COMMIT .
- docker tag stocard/dockerbase-node:$TRAVIS_COMMIT $REGISTRY_PREFIX/stocard/dockerbase-node:$TRAVIS_BRANCH
- docker tag stocard/dockerbase-node:$TRAVIS_COMMIT $REGISTRY_PREFIX/stocard/dockerbase-node:$TRAVIS_COMMIT
after_success:
- docker login -u="$PRIVATE_DOCKER_USERNAME" -p="$PRIVATE_DOCKER_PASSWORD" $PRIVATE_REGISTRY && docker push $REGISTRY_PREFIX/stocard/dockerbase-node:$TRAVIS_COMMIT && docker push $REGISTRY_PREFIX/stocard/dockerbase-node:$TRAVIS_BRANCH && docker logout
env:
  global:
  - secure: EdsGmppsFkhSWk2ya4602yYcyn2Ii5dRRVraBj8uLCpyvzBO33UiZEt7SSShBj1vovR5SlfpzbjJFX7Nz9Fu1OdaqxYIszz4zVJVpA7oygw/fkuPA39RVQbAZp8gw8B0HYOpIItGmkbGN7tJUNNQkBhayXnMepKPrEmBObpIioRW7ORff9mEmZva9k/JzregszqgJKoin9zC/4iIGwMN0SpmU2PUwic90ybh+YYHUV0zY58jd88hHwAjVPPvgPcUsSW4QKX4hy5yMu1v0BdXB4Wd7ehTvbyGWp+ipcGAojdtfbXZQCN9VOkWe1GY+qnNp2M3+kPptdEvu6wJKeCIw9jecogISq0mmR2PH5YurY9jSJo2hhpjsDTXHyu3zmOFckcTZBT3Qehg8FoByLEitxzhTevQ67BNk9UG22eBQ4yKyW+sqGWWQzCOYDKFyaydTa27ns69N3+xvsd+4+JolkanU/VhpbmMdgDWxfU03BhB3q478zShWmSL+kxCnZIhbO8hzdDDFuG+8SEgRruHOkeh9BSAdThN1LepPAyO6bQnZxHt3hYOd0rR2RFOTAriA4NCJfEOFBCu/K32kZEN8H8ACjx47Fy4F5qHK3L3qAnJCTRTKPx2EDCfpTiIa98E6qqruzLob0n1+WTXr666Po9WJnZZuznFbUHu+/Q+ngw=
  - secure: lEzGyKMSCD7d86oA+vvAKfMR9jvd0tvHb3dhbXpXN7bkpA8aiax7nVGEVBn3tTprQHgww0IUgTjmGmnZb8UDllfpORj7GrsKrwe7D/kRyG4qe3ceol+7qa6HjREyJtoNTNtQyhf7SdvCg97BtElwjPg3jnfw9mFGUp5emILJmvrMIkQ0g2C1zNR+4oM2szm2c5+9RBy/bFmKRbmsgjt+qrLZzx+4Xp9WJbWa2JKoSmJsV9vN5FdTWVJ118dopBDsbxlbG0lfcff/e0SclrB2MdKvyJ23m5M9BmrY1tDS+n8d5cOXpIWQ/qYWxG256R9X4TOr5IAS/7UPJ8pYHAyyE6UmcBMpgnKGUq1uDlxU8oGFiAsWwtF4SpVHcY4Wbmi+JKdUQDqrJPoKnAL7DfKz2Ob4rTUZssbeLAMrso5L8rEsxhe7mUvr4m6zmfpxHm0KBD5UtcXvJKLQhfRWz/igM+v5Vzj1wYf6+D331erXFlDl2IP51TY7KTZOpHpDHi5/SYooxNWqhgB+fE2KT4Ls4R9QiTW5JMpsHcjaSvmutIK339A4mD/jVJq7Fsn7eFaAJ3U8jynlxTB66WEZC17rdDtAW6IcoaQXA0KRaFWoOdsqMa4jNIWTHvOi+YcXnlVb+jMrvO+YXUsQGYqirQumzGVBm2wxXSd931abwhpnVe8=
  - secure: OY2nq0Zg3kPL59kVXi9U+bFkvzpKd5ByAPOh2KF8p6+zC/i/wOTSPYQY+kl3b2A8+6JIY35X4SYu2No2Ea/IqYn4FzLBvWLQQdxsgffHkqS/244UTtjKbOv8WLJeFMY+AI2zOjlmwsBCQ1Vs34Q7f9ctVwZO5o1EUixi875MmkD6D6ZzubkjkOXYVxNNXZBCHB+M1AxQV5cQgVgwOyTszbzf1OONnD+ig/6GdKLPxoxZiqMhC55kJ19PvhTxUaXbn9rWc96WG3jtZURvwF9QSVI0T0VtsmPZjBMx5zSFUwjqeZKilrKxEwd3foUJuSqrToOMxOCHvUEj3waS97Bh4pgE18uLhh+hyDYr6+bnpu0NMLWXvqvpZftKbAs1Or/nlYFsB9SthpWlolFE0ROcZIIl0/n9JRMdggBMbxMPt6kZYnCfBDLe+KHH9Ox87xGbp/PPK+4FaPCSMCEovstbWIkgB0vAUlT9KgGKmGZ9Ob4oyTdtaKOU73aqI1vXWG2MMv5m5LQ2jOwimiGNm/tNv0AzAIRjlYYC26r2erB1PPoymhI0Bd0VRbwD9N0SEJuw2s5HRrzysyvyh/l2dkdTwAZZsH5QmlvQVHm6LtNj1kgCarW7znY3pBAsVoTTFksbF2wgaP24XPM41qnDSqVshF3wTjo+sOKudxldua/2CP4=
  - secure: Fo5n+2QQ9RtszcxZVXxKhcoORISffbh6GP4fuGlcrgYol9/b0MSh1ZWCmVTzfcoZwHrM8FFuzaZx8rNK+aaOo8KZo3BFH1tmHahcI3ahM+nLDfdk4Ejm+iHSbL59BLRddUFgZun9NiHypV7FtGzi3Zgcd17OgEfCeUtTqxj8BTuFv6TB1V95HjKX64vu18TpFjpnU/Z2iykPmqxWUaHnH5Jodo/Oj+1dcVfn82qjfmlHR5RlU5BX3Fh2kdbVgUrFjbPIvr+z7FvBsSI041Plih6BOZP4LVkzf+2K6PtWdWpHgnax7M5fYk+ZSWy7fawM6b9wB7UVcLaGwiTpzyvnZ9UzkQnCfPtDRGDthd5kCdTrShTu733lm4ypzSAP8m1M5xILIbfgyYN1VgdJqeD89Ty8f1h5KmU5un+kzjY9IF5uL6mC8NjOVQ39RSKyp5besriPLDptZnUl2RolqnvY/SyeaqXQ+JoZ0uehPMxtXFrjrt/ZHIj42AXC7D/j40AfElNpsA8pDnyW4uFYGM4OLbL1mCLaxej2AbUixNqe96wiVl9uLl1wpsEORhwbE3eoqEDPozuqXTvHc9bKtuv802Qb66iC7sEn7BMdXMe4kVTgTsEbxQl4/40qiOJj47X1IEzXMjTXCK4A42xaGcuI1LRrSm27L6xGiJhR9tRlmOE=
